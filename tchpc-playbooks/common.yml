---
- hosts: all
  user: vagrant
  sudo: True

  vars_files:
    - global_vars.yml

  tasks:
  - name: Ubuntu | install python-software-properties and python-apt
    action: apt pkg='python-software-properties' state=installed
    only_if: '$is_ubuntu'

  - name: Ubuntu | Enable ppa:rquillo/ansible
    action: command /usr/bin/add-apt-repository -y ppa:rquillo/ansible
    only_if: '$is_ubuntu'

  - name: Ubuntu | Common packages
    action: apt pkg=$item state=present update_cache=yes force=yes
    only_if: '$is_ubuntu'
    with_items:
      - ansible
      - git
      - etckeeper

  - name: Scientific | Enable EPEL
    action: yum pkg=$item state=present
    only_if: '$is_scientific'
    with_items:
      - epel-release

  - name: Scientific | Common packages
    action: yum pkg=$item state=present
    only_if: '$is_scientific'
    with_items:
      - ansible
      - git
      - etckeeper
